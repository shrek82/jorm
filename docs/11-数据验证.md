# æ•°æ®éªŒè¯

æœ¬æŒ‡å—è¯¦ç»†ä»‹ç» jorm çš„æ•°æ®éªŒè¯åŠŸèƒ½ï¼Œå¯ä»¥åœ¨æ’å…¥æˆ–æ›´æ–°å‰éªŒè¯æ•°æ®ã€‚

## åŸºæœ¬éªŒè¯

### ç‹¬ç«‹éªŒè¯ï¼ˆä¸æ¶‰åŠæ•°æ®åº“ï¼‰

ä½¿ç”¨ `jorm.Validate()` å‡½æ•°å¯ä»¥ç‹¬ç«‹éªŒè¯æ•°æ®ï¼Œä¸éœ€è¦æ•°æ®åº“è¿æ¥ï¼š

```go
// å®šä¹‰éªŒè¯è§„åˆ™
func (u *User) GetValidator() jorm.Validator {
    return jorm.Rules{
        "Name": {
            jorm.Required.Msg("Name is required"),
            jorm.MinLen(2).Msg("Name too short"),
        },
        "Email": {
            jorm.Required.Msg("Email is required"),
            jorm.Email.Msg("Invalid email format"),
        },
        "Age": {
            jorm.Required.Msg("Age is required"),
            jorm.Range(18, 100).Msg("Must be between 18 and 100"),
        },
    }.Validate
}

// ç‹¬ç«‹éªŒè¯æ•°æ®ï¼ˆä¸éœ€è¦æ•°æ®åº“ï¼‰
user := &User{
    Name:  "A",           // å¤ªçŸ­
    Email: "invalid",     // æ ¼å¼é”™è¯¯
    Age:   10,            // å°äº18
}

err := jorm.Validate(user, user.GetValidator())
if err != nil {
    if validationErrs, ok := err.(jorm.ValidationErrors); ok {
        for field, messages := range validationErrs {
            fmt.Printf("%s:\n", field)
            for _, msg := range messages {
                fmt.Printf("  - %s\n", msg)
            }
        }
    }
}

// è¾“å‡ºï¼š
// Name:
//   - Name too short
// Email:
//   - Invalid email format
// Age:
//   - Must be between 18 and 100
```

**ä½¿ç”¨åœºæ™¯**ï¼š
- è¡¨å•æäº¤å‰çš„å®¢æˆ·ç«¯éªŒè¯
- API è¯·æ±‚æ•°æ®éªŒè¯
- å•å…ƒæµ‹è¯•
- ä¸æ¶‰åŠæ•°æ®åº“çš„æ•°æ®éªŒè¯

### å®šä¹‰éªŒè¯è§„åˆ™

```go
import "github.com/shrek82/jorm"

type User struct {
    ID    int64  `jorm:"pk auto"`
    Name  string `jorm:"size:100"`
    Email string `jorm:"size:100"`
    Age   int
}

func (u *User) GetValidator() jorm.Validator {
    return jorm.Rules{
        "Name": {
            jorm.Required.Msg("Name is required"),
            jorm.MinLen(2).Msg("Name too short"),
            jorm.MaxLen(50).Msg("Name too long"),
        },
        "Email": {
            jorm.Required.Msg("Email is required"),
            jorm.Email.Msg("Invalid email format"),
        },
        "Age": {
            jorm.Required.Msg("Age is required"),
            jorm.Range(18, 100).Msg("Must be between 18 and 100"),
        },
    }.Validate
}
```

### ä½¿ç”¨éªŒè¯

```go
// åˆ›å»ºç”¨æˆ·
user := &User{
    Name:  "Alice",
    Email: "alice@example.com",
    Age:   25,
}

// å¸¦éªŒè¯çš„æ’å…¥
id, err := db.Model(user).InsertWithValidator(user, user.GetValidator())
if err != nil {
    if validationErrs, ok := err.(jorm.ValidationErrors); ok {
        for field, messages := range validationErrs {
            fmt.Printf("%s: %v\n", field, messages)
        }
        return
    }
    panic(err)
}

fmt.Printf("ç”¨æˆ·åˆ›å»ºæˆåŠŸï¼ŒID: %d\n", id)
```

## å†…ç½®éªŒè¯è§„åˆ™

### å¿…å¡«éªŒè¯

```go
jorm.Required.Msg("è¯¥å­—æ®µå¿…å¡«")
```

### é•¿åº¦éªŒè¯

```go
jorm.MinLen(2)       // æœ€å°é•¿åº¦
jorm.MaxLen(100)     // æœ€å¤§é•¿åº¦
jorm.Len(10)         // å›ºå®šé•¿åº¦
```

### èŒƒå›´éªŒè¯

```go
jorm.Range(18, 100)  // æ•°å€¼èŒƒå›´
jorm.Min(0)          // æœ€å°å€¼
jorm.Max(100)        // æœ€å¤§å€¼
```

### æ ¼å¼éªŒè¯

```go
jorm.Email      // é‚®ç®±æ ¼å¼
jorm.Mobile     // æ‰‹æœºå·æ ¼å¼
jorm.URL        // URLæ ¼å¼
jorm.IP         // IPåœ°å€æ ¼å¼
jorm.UUID       // UUIDæ ¼å¼
jorm.JSON       // JSONæ ¼å¼
jorm.Numeric    // çº¯æ•°å­—
jorm.Alpha      // çº¯å­—æ¯
jorm.AlphaNumeric  // å­—æ¯æ•°å­—
```

### æ­£åˆ™è¡¨è¾¾å¼

```go
jorm.Regexp(`^[a-z]+$`)  // è‡ªå®šä¹‰æ­£åˆ™
```

### åŒ…å«/æ’é™¤

```go
jorm.In("active", "pending", "completed")  // æšä¸¾å€¼
jorm.Contains("example")                      // åŒ…å«å­ä¸²
jorm.Excludes("admin")                       // æ’é™¤å­ä¸²
jorm.NoHTML                                  // ä¸å…è®¸HTMLæ ‡ç­¾
```

### æ—¥æœŸæ—¶é—´

```go
jorm.Datetime("2006-01-02")      // æ—¥æœŸæ ¼å¼
jorm.Datetime("2006-01-02 15:04:05")  // æ—¥æœŸæ—¶é—´æ ¼å¼
```

## å®Œæ•´ç¤ºä¾‹

### ç”¨æˆ·éªŒè¯

```go
type User struct {
    ID       int64  `jorm:"pk auto"`
    Username string `jorm:"size:50"`
    Email    string `jorm:"size:100"`
    Password string `jorm:"size:255"`
    Age      int
    Phone    string `jorm:"size:20"`
    Website  string `jorm:"size:200"`
}

func (u *User) GetValidator() jorm.Validator {
    return jorm.Rules{
        "Username": {
            jorm.Required.Msg("ç”¨æˆ·åå¿…å¡«"),
            jorm.MinLen(3).Msg("ç”¨æˆ·åè‡³å°‘3ä¸ªå­—ç¬¦"),
            jorm.MaxLen(20).Msg("ç”¨æˆ·åæœ€å¤š20ä¸ªå­—ç¬¦"),
            jorm.AlphaNumeric.Msg("ç”¨æˆ·ååªèƒ½åŒ…å«å­—æ¯å’Œæ•°å­—"),
        },
        "Email": {
            jorm.Required.Msg("é‚®ç®±å¿…å¡«"),
            jorm.Email.Msg("é‚®ç®±æ ¼å¼ä¸æ­£ç¡®"),
        },
        "Password": {
            jorm.Required.Msg("å¯†ç å¿…å¡«"),
            jorm.MinLen(6).Msg("å¯†ç è‡³å°‘6ä¸ªå­—ç¬¦"),
            jorm.MaxLen(100).Msg("å¯†ç æœ€å¤š100ä¸ªå­—ç¬¦"),
        },
        "Age": {
            jorm.Required.Msg("å¹´é¾„å¿…å¡«"),
            jorm.Range(18, 120).Msg("å¹´é¾„å¿…é¡»åœ¨18åˆ°120ä¹‹é—´"),
        },
        "Phone": {
            jorm.Mobile.Msg("æ‰‹æœºå·æ ¼å¼ä¸æ­£ç¡®"),
        },
        "Website": {
            jorm.URL.Msg("URLæ ¼å¼ä¸æ­£ç¡®"),
        },
    }.Validate
}

// ä½¿ç”¨
user := &User{
    Username: "alice123",
    Email:    "alice@example.com",
    Password: "password123",
    Age:      25,
    Phone:    "13800138000",
    Website:  "https://example.com",
}

id, err := db.Model(user).InsertWithValidator(user, user.GetValidator())
if err != nil {
    fmt.Printf("éªŒè¯å¤±è´¥: %v\n", err)
    return
}

fmt.Printf("ç”¨æˆ·åˆ›å»ºæˆåŠŸï¼ŒID: %d\n", id)
```

### äº§å“éªŒè¯

```go
type Product struct {
    ID          int64   `jorm:"pk auto"`
    Name        string  `jorm:"size:200"`
    Description string  `jorm:"type:text"`
    Price       float64
    Stock       int
    Status      string
}

func (p *Product) GetValidator() jorm.Validator {
    return jorm.Rules{
        "Name": {
            jorm.Required.Msg("äº§å“åç§°å¿…å¡«"),
            jorm.MinLen(2).Msg("äº§å“åç§°è‡³å°‘2ä¸ªå­—ç¬¦"),
            jorm.MaxLen(200).Msg("äº§å“åç§°æœ€å¤š200ä¸ªå­—ç¬¦"),
        },
        "Price": {
            jorm.Required.Msg("ä»·æ ¼å¿…å¡«"),
            jorm.Min(0.01).Msg("ä»·æ ¼å¿…é¡»å¤§äº0"),
        },
        "Stock": {
            jorm.Required.Msg("åº“å­˜å¿…å¡«"),
            jorm.Min(0).Msg("åº“å­˜ä¸èƒ½ä¸ºè´Ÿæ•°"),
        },
        "Status": {
            jorm.Required.Msg("çŠ¶æ€å¿…å¡«"),
            jorm.In("draft", "published", "out_of_stock").Msg("çŠ¶æ€æ— æ•ˆ"),
        },
    }.Validate
}

// ä½¿ç”¨
product := &Product{
    Name:    "è‹¹æœæ‰‹æœº",
    Price:   5999.00,
    Stock:   100,
    Status:  "published",
}

id, err := db.Model(product).InsertWithValidator(product, product.GetValidator())
if err != nil {
    fmt.Printf("éªŒè¯å¤±è´¥: %v\n", err)
    return
}

fmt.Printf("äº§å“åˆ›å»ºæˆåŠŸï¼ŒID: %d\n", id)
```

## æ›´æ–°æ—¶éªŒè¯

```go
// å¸¦éªŒè¯çš„æ›´æ–°
user := &User{
    ID:    1,
    Name:  "Bob",
    Email: "bob@example.com",
    Age:   30,
}

affected, err := db.Model(&User{}).
    Where("id = ?", user.ID).
    UpdateWithValidator(user, user.GetValidator())
if err != nil {
    if validationErrs, ok := err.(jorm.ValidationErrors); ok {
        fmt.Printf("éªŒè¯å¤±è´¥: %v\n", validationErrs)
        return
    }
    panic(err)
}

fmt.Printf("æ›´æ–°äº† %d æ¡è®°å½•\n", affected)
```

## ç»„åˆå¤šä¸ªéªŒè¯å™¨

å¯ä»¥åŒæ—¶ä½¿ç”¨å¤šä¸ªéªŒè¯å™¨ï¼ŒåŸºç¡€éªŒè¯å’Œä¸šåŠ¡é€»è¾‘éªŒè¯åˆ†å¼€ï¼š

```go
type User struct {
    ID    int64  `jorm:"pk auto"`
    Name  string `jorm:"size:100"`
    Email string `jorm:"size:100"`
    Age   int
    Role  string `jorm:"size:20"`
}

// åŸºç¡€éªŒè¯å™¨ï¼šéªŒè¯å­—æ®µæ ¼å¼
func (u *User) GetValidator() jorm.Validator {
    return jorm.Rules{
        "Name": {
            jorm.Required.Msg("Name is required"),
            jorm.MinLen(2).Msg("Name too short"),
        },
        "Email": {
            jorm.Required.Msg("Email is required"),
            jorm.Email.Msg("Invalid email"),
        },
        "Age": {
            jorm.Range(18, 100).Msg("Age must be 18-100"),
        },
    }.Validate
}

// ä¸šåŠ¡éªŒè¯å™¨ï¼šéªŒè¯ä¸šåŠ¡é€»è¾‘
func (u *User) GetRoleValidator() jorm.Validator {
    return func(v any) error {
        user := v.(*User)
        if user.Role == "admin" && user.Age < 25 {
            return errors.New("Admin must be at least 25 years old")
        }
        return nil
    }
}

// ç»„åˆä½¿ç”¨
user := &User{
    Name:  "Bob",
    Email: "bob@example.com",
    Age:   20,
    Role:  "admin",  // å¹´é¾„ä¸å¤Ÿï¼Œæ— æ³•æˆä¸ºç®¡ç†å‘˜
}

// ç‹¬ç«‹éªŒè¯ï¼ˆä¸æ¶‰åŠæ•°æ®åº“ï¼‰
err := jorm.Validate(user, user.GetValidator(), user.GetRoleValidator())
if err != nil {
    fmt.Println("éªŒè¯å¤±è´¥:", err)
    // è¾“å‡ºï¼šAdmin must be at least 25 years old
}

// å¸¦éªŒè¯çš„æ’å…¥ï¼ˆåŒæ—¶ä½¿ç”¨å¤šä¸ªéªŒè¯å™¨ï¼‰
id, err := db.Model(user).InsertWithValidator(
    user,
    user.GetValidator(),      // åŸºç¡€éªŒè¯
    user.GetRoleValidator(),   // ä¸šåŠ¡éªŒè¯
)
```

## ä¸´æ—¶éªŒè¯å•ä¸ªå­—æ®µ

### jorm.Check - å¿«é€ŸéªŒè¯å•ä¸ªå­—æ®µ

`jorm.Check` ç”¨äºåœ¨é’©å­å‡½æ•°ä¸­ä¸´æ—¶éªŒè¯å•ä¸ªå­—æ®µï¼Œä¸éœ€è¦å®šä¹‰å®Œæ•´çš„éªŒè¯å™¨ï¼š

```go
type User struct {
    ID   int64  `jorm:"pk auto"`
    Name string
    Code string `jorm:"size:20"`
}

// BeforeInsert é’©å­å‡½æ•°ä¸­ä¸´æ—¶éªŒè¯ Code å­—æ®µ
func (u *User) BeforeInsert() error {
    // ä¸´æ—¶éªŒè¯ Code å­—æ®µï¼šå¿…é¡»å­˜åœ¨ï¼Œä¸”é•¿åº¦è‡³å°‘ä¸º 5
    if err := jorm.Check(u.Code,
        jorm.Required.Msg("Codeä¸èƒ½ä¸ºç©º"),
        jorm.MinLen(5).Msg("Codeå¤ªçŸ­"),
    ); err != nil {
        return err  // ç›´æ¥è¿”å›éªŒè¯é”™è¯¯
    }

    // ç»§ç»­å…¶ä»–å¤„ç†...
    return nil
}

// ä½¿ç”¨
user := &User{Name: "Alice", Code: "123"}
_, err := db.Model(user).Insert(user)
// è¾“å‡ºï¼šCodeå¤ªçŸ­
```

### è‡ªå®šä¹‰é”™è¯¯æ¶ˆæ¯

```go
func (u *User) BeforeInsert() error {
    // å¯ä»¥è‡ªå®šä¹‰è¿”å›çš„é”™è¯¯æ¶ˆæ¯
    if err := jorm.Check(u.Code,
        jorm.Required,
        jorm.MinLen(5),
    ); err != nil {
        return fmt.Errorf("Codeå­—æ®µéªŒè¯å¤±è´¥: %w", err)
    }

    return nil
}

// æˆ–è€…å®Œå…¨è‡ªå®šä¹‰é”™è¯¯æ¶ˆæ¯
func (u *User) BeforeInsert() error {
    if err := jorm.Check(u.Name,
        jorm.Required,
        jorm.MinLen(5),
    ); err != nil {
        return errors.New("åç§°æ ¼å¼ä¸æ­£ç¡®")
    }

    return nil
}
```

### ç»„åˆå¤šä¸ª Check

```go
type Product struct {
    ID    int64  `jorm:"pk auto"`
    Code  string
    Name  string
    Price float64
}

func (p *Product) BeforeInsert() error {
    // éªŒè¯ Code
    if err := jorm.Check(p.Code,
        jorm.Required,
        jorm.MinLen(3),
        jorm.AlphaNumeric,
    ); err != nil {
        return err
    }

    // éªŒè¯ Name
    if err := jorm.Check(p.Name,
        jorm.Required,
        jorm.MinLen(2),
        jorm.MaxLen(100),
    ); err != nil {
        return err
    }

    // éªŒè¯ Price
    if err := jorm.Check(p.Price,
        jorm.Required,
        jorm.Min(0.01),
    ); err != nil {
        return err
    }

    // æ‰€æœ‰éªŒè¯é€šè¿‡
    return nil
}
```

### jorm.Check vs jorm.Validate

| ç‰¹æ€§ | jorm.Check | jorm.Validate |
|-----|-----------|--------------|
| éªŒè¯å¯¹è±¡ | å•ä¸ªå­—æ®µçš„å€¼ | æ•´ä¸ªç»“æ„ä½“ |
| ä½¿ç”¨ä½ç½® | é’©å­å‡½æ•°ã€ä»»æ„ä»£ç  | ç‹¬ç«‹éªŒè¯æˆ–æ•°æ®åº“æ“ä½œ |
| éœ€è¦å®šä¹‰éªŒè¯å™¨ | âŒ ä¸éœ€è¦ | âœ… éœ€è¦ |
| çµæ´»æ€§ | é«˜ - å¯ä»¥ä¸´æ—¶æ·»åŠ éªŒè¯ | ä¸­ - éœ€è¦å®šä¹‰éªŒè¯å™¨ |
| é€‚ç”¨åœºæ™¯ | é’©å­å‡½æ•°ä¸­çš„ä¸´æ—¶éªŒè¯ | è¡¨å•éªŒè¯ã€API éªŒè¯ç­‰ |

**ä½¿ç”¨å»ºè®®**ï¼š
- ä½¿ç”¨ `jorm.Check`ï¼šåœ¨é’©å­å‡½æ•°ä¸­ä¸´æ—¶éªŒè¯æŸä¸ªå­—æ®µ
- ä½¿ç”¨ `jorm.Validate`ï¼šéœ€è¦éªŒè¯æ•´ä¸ªç»“æ„ä½“ï¼Œæˆ–åœ¨è¡¨å•/API éªŒè¯æ—¶ä½¿ç”¨

### å®é™…åº”ç”¨åœºæ™¯

#### åœºæ™¯1ï¼šæ¡ä»¶éªŒè¯

```go
type Order struct {
    ID         int64  `jorm:"pk auto"`
    Type       string `jorm:"size:20"`
    Address    string `jorm:"size:200"`
    TrackingNo string `jorm:"size:50"`
}

func (o *Order) BeforeInsert() error {
    // æ™®é€šè®¢å•éœ€è¦åœ°å€
    if err := jorm.Check(o.Address, jorm.Required); err != nil {
        return err
    }

    // å¿«é€’è®¢å•éœ€è¦ç‰©æµå•å·
    if o.Type == "express" {
        if err := jorm.Check(o.TrackingNo,
            jorm.Required,
            jorm.MinLen(10),
        ); err != nil {
            return errors.New("å¿«é€’è®¢å•å¿…é¡»æä¾›ç‰©æµå•å·")
        }
    }

    return nil
}
```

#### åœºæ™¯2ï¼šä¸šåŠ¡è§„åˆ™éªŒè¯

```go
type User struct {
    ID      int64  `jorm:"pk auto"`
    Name    string
    Age     int
    IsAdmin bool
}

func (u *User) BeforeInsert() error {
    // åŸºç¡€éªŒè¯
    if err := jorm.Check(u.Name,
        jorm.Required,
        jorm.MinLen(2),
    ); err != nil {
        return err
    }

    // ç®¡ç†å‘˜å¿…é¡»å¹´æ»¡ 25 å²
    if u.IsAdmin {
        if err := jorm.Check(u.Age, jorm.Min(25)); err != nil {
            return errors.New("ç®¡ç†å‘˜å¿…é¡»å¹´æ»¡ 25 å²")
        }
    }

    return nil
}
```

#### åœºæ™¯3ï¼šåŠ¨æ€éªŒè¯

```go
type Account struct {
    ID       int64  `jorm:"pk auto"`
    Type     string `jorm:"size:20"`
    Balance  float64
    Currency string `jorm:"size:10"`
}

func (a *Account) BeforeInsert() error {
    // æ ¹æ®è´¦æˆ·ç±»å‹éªŒè¯ä½™é¢
    if a.Type == "premium" {
        // é«˜çº§è´¦æˆ·æœ€ä½ä½™é¢ 1000
        if err := jorm.Check(a.Balance, jorm.Min(1000)); err != nil {
            return errors.New("é«˜çº§è´¦æˆ·æœ€ä½ä½™é¢ä¸º 1000")
        }
    } else {
        // æ™®é€šè´¦æˆ·æœ€ä½ä½™é¢ 0
        if err := jorm.Check(a.Balance, jorm.Min(0)); err != nil {
            return err
        }
    }

    return nil
}
```

## è‡ªå®šä¹‰éªŒè¯è§„åˆ™

### ä½¿ç”¨ Regexp

```go
type User struct {
    ID       int64  `jorm:"pk auto"`
    Username string
}

func (u *User) GetValidator() jorm.Validator {
    return jorm.Rules{
        "Username": {
            jorm.Required,
            jorm.Regexp(`^[a-z][a-z0-9_]*$`).Msg("ç”¨æˆ·åå¿…é¡»ä»¥å°å†™å­—æ¯å¼€å¤´ï¼Œåªèƒ½åŒ…å«å°å†™å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿"),
        },
    }.Validate
}
```

### è‡ªå®šä¹‰éªŒè¯å‡½æ•°

```go
type User struct {
    ID          int64  `jorm:"pk auto"`
    Password    string `jorm:"size:255"`
    ConfirmPassword string `jorm:"-"`
}

func (u *User) CustomValidator() jorm.Validator {
    return func(v any) error {
        user := v.(*User)
        if user.Password != user.ConfirmPassword {
            return fmt.Errorf("ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸ä¸€è‡´")
        }
        return nil
    }
}

// ä½¿ç”¨å¤šä¸ªéªŒè¯å™¨
id, err := db.Model(user).InsertWithValidator(user,
    jorm.Rules{
        "Password": {
            jorm.Required,
            jorm.MinLen(6),
        },
    }.Validate,
    user.CustomValidator(),
)
```

## éªŒè¯é”™è¯¯å¤„ç†

### å¿«é€Ÿè·å–é”™è¯¯æ¶ˆæ¯ï¼ˆæ¨èï¼‰

å¯¹äºå¤§å¤šæ•° API åœºæ™¯ï¼Œæˆ‘ä»¬åªéœ€è¦æ˜¾ç¤ºâ€œç¬¬ä¸€ä¸ªâ€é‡åˆ°çš„é”™è¯¯ã€‚ä½¿ç”¨ `jorm.FirstMsg(err)` æ˜¯æœ€ç®€å•å¿«æ·çš„æ–¹æ³•ï¼Œå®ƒä¼šè‡ªåŠ¨å¤„ç†é”™è¯¯ç±»å‹è½¬æ¢ã€‚

```go
id, err := db.Model(user).InsertWithValidator(user, user.GetValidator())
if err != nil {
    // è‡ªåŠ¨å¤„ç†ï¼š
    // 1. å¦‚æœæ˜¯éªŒè¯é”™è¯¯ï¼Œè¿”å›ç¬¬ä¸€ä¸ªå­—æ®µçš„é”™è¯¯æ¶ˆæ¯
    // 2. å¦‚æœæ˜¯æ™®é€šé”™è¯¯ï¼Œè¿”å› err.Error()
    // 3. å¦‚æœæ˜¯ nilï¼Œè¿”å›ç©ºå­—ç¬¦ä¸²
    msg := jorm.FirstMsg(err)
    
    c.JSON(400, gin.H{"error": msg})
    return
}
```

### è·å–æ‘˜è¦ä¿¡æ¯

`ValidationErrors` å®ç°äº† `error` æ¥å£ï¼Œå¹¶ä¼˜åŒ–äº† `Error()` æ–¹æ³•ã€‚å¦‚æœå­˜åœ¨å¤šä¸ªé”™è¯¯ï¼Œå®ƒä¼šè¿”å›ä¸€ä¸ªæ‘˜è¦æ ¼å¼ã€‚

```go
err := jorm.Validate(user, rules)
if err != nil {
    // è¾“å‡ºç±»ä¼¼: "Email: invalid format (and 2 more errors)"
    fmt.Println(err.Error())
}
```

### è·å–è¯¦ç»†é”™è¯¯ä¿¡æ¯

å¦‚æœä½ éœ€è¦å¯¹æ¯ä¸ªå­—æ®µè¿›è¡Œç²¾ç»†åŒ–çš„ UI å±•ç¤ºï¼Œå¯ä»¥æ–­è¨€ä¸º `jorm.ValidationErrors` ç±»å‹ã€‚

```go
if err != nil {
    if validationErrs, ok := err.(jorm.ValidationErrors); ok {
        // ä½¿ç”¨è¾…åŠ©æ–¹æ³•è·å–ç¬¬ä¸€ä¸ªé”™è¯¯å¯¹è±¡æˆ–æ¶ˆæ¯
        firstErr := validationErrs.First()
        firstMsg := validationErrs.FirstMsg()

        // æˆ–è€…éå†æ‰€æœ‰é”™è¯¯
        for field, messages := range validationErrs {
            fmt.Printf("%s: %v\n", field, messages)
        }
    }
}
```

### è½¬æ¢ä¸º JSON å“åº”

```go
func handleValidationErrors(err error) map[string][]string {
    validationErrs, ok := err.(jorm.ValidationErrors)
    if !ok {
        return nil
    }

    result := make(map[string][]string)
    for field, messages := range validationErrs {
        result[field] = messages
    }

    return result
}

// API è¿”å›
if err != nil {
    c.JSON(400, gin.H{
        "error": "validation failed",
        "details": handleValidationErrors(err),
    })
    return
}
```

## é«˜çº§éªŒè¯åŠŸèƒ½

### Optional - å¯é€‰å­—æ®µ

```go
type User struct {
    ID   int64  `jorm:"pk auto"`
    Name string
    Age  int
}

func (u *User) GetValidator() jorm.Validator {
    return jorm.Rules{
        "Name": {
            jorm.Required,
        },
        "Age": {
            // Optional å…è®¸é›¶å€¼ï¼ˆ0ï¼‰
            jorm.Range(18, 100).Optional(),
        },
    }.Validate
}

// Age ä¸º 0ï¼ˆé›¶å€¼ï¼‰ï¼Œå› ä¸º Optional æ‰€ä»¥éªŒè¯é€šè¿‡
user := &User{Name: "Alice", Age: 0}
err := jorm.Validate(user, user.GetValidator())
// err == nilï¼ŒéªŒè¯é€šè¿‡

// Age ä¸º 10ï¼ˆéé›¶å€¼ï¼‰ï¼Œä¸åœ¨èŒƒå›´å†…ï¼ŒéªŒè¯å¤±è´¥
user2 := &User{Name: "Bob", Age: 10}
err = jorm.Validate(user2, user2.GetValidator())
// err != nilï¼ŒéªŒè¯å¤±è´¥ï¼šAge must be 18-100
```

### When - æ¡ä»¶è§¦å‘éªŒè¯

```go
type Order struct {
    Status  string
    Reason  string
}

func (o *Order) GetValidator() jorm.Validator {
    return jorm.Rules{
        "Status": {
            jorm.Required,
            jorm.In("active", "cancelled", "pending"),
        },
        "Reason": {
            // åªæœ‰å½“ Status ä¸º "cancelled" æ—¶ï¼ŒReason æ‰å¿…å¡«
            jorm.Required.When(func(v any) bool {
                order := v.(*Order)
                return order.Status == "cancelled"
            }).Msg("Reason is required when status is cancelled"),
        },
    }.Validate
}

// æƒ…å†µ1ï¼šStatus ä¸º "active"ï¼ŒReason å¯ä»¥ä¸ºç©º
order1 := &Order{Status: "active", Reason: ""}
err := jorm.Validate(order1, order1.GetValidator())
// err == nilï¼ŒéªŒè¯é€šè¿‡

// æƒ…å†µ2ï¼šStatus ä¸º "cancelled"ï¼ŒReason å¿…å¡«ä½†ä¸ºç©º
order2 := &Order{Status: "cancelled", Reason: ""}
err = jorm.Validate(order2, order2.GetValidator())
// err != nilï¼ŒéªŒè¯å¤±è´¥ï¼šReason is required when status is cancelled

// æƒ…å†µ3ï¼šStatus ä¸º "cancelled"ï¼ŒReason æœ‰å€¼
order3 := &Order{Status: "cancelled", Reason: "Wrong product"}
err = jorm.Validate(order3, order3.GetValidator())
// err == nilï¼ŒéªŒè¯é€šè¿‡
```

### å¤šè§„åˆ™éªŒè¯ï¼ˆæ”¶é›†æ‰€æœ‰é”™è¯¯ï¼‰

```go
type Product struct {
    Code string
}

func (p *Product) GetValidator() jorm.Validator {
    return jorm.Rules{
        "Code": {
            // ä¸€ä¸ªå­—æ®µå¯ä»¥åº”ç”¨å¤šä¸ªè§„åˆ™
            jorm.Required.Msg("Code is required"),
            jorm.MinLen(5).Msg("Code too short"),
            jorm.MaxLen(20).Msg("Code too long"),
            jorm.AlphaNumeric.Msg("Code must be alphanumeric"),
        },
    }.Validate
}

product := &Product{Code: "ab"}  // æ—¢å¤ªçŸ­ï¼Œåˆä¸æ˜¯å­—æ¯æ•°å­—
err := jorm.Validate(product, product.GetValidator())

if validationErrs, ok := err.(jorm.ValidationErrors); ok {
    for field, messages := range validationErrs {
        fmt.Printf("%s:\n", field)
        for _, msg := range messages {
            fmt.Printf("  - %s\n", msg)
        }
    }
}

// è¾“å‡ºï¼š
// Code:
//   - Code too short
//   - Code must be alphanumeric
```

### çµæ´»çš„å­—æ®µååŒ¹é…

éªŒè¯å™¨æ”¯æŒçµæ´»çš„å­—æ®µååŒ¹é…ï¼ŒåŒ…æ‹¬ï¼š

1. å­—æ®µåï¼ˆå¤§å°å†™ä¸æ•æ„Ÿï¼‰
2. åˆ—åï¼ˆé€šè¿‡ jorm æ ‡ç­¾æŒ‡å®šï¼‰
3. é©¼å³°å’Œè›‡å½¢å‘½å

```go
type User struct {
    UserName string `jorm:"column:user_name"`
    UserAge  int    `jorm:"column:user_age"`
}

func (u *User) GetValidator() jorm.Validator {
    return jorm.Rules{
        "username": {  // åŒ¹é… UserNameï¼ˆå¤§å°å†™ä¸æ•æ„Ÿï¼‰
            jorm.Required,
            jorm.MinLen(3),
        },
        "user_name": {  // åŒ¹é… UserNameï¼ˆåˆ—åï¼‰
            jorm.MaxLen(50),
        },
        "User_Age": {  // åŒ¹é… UserAgeï¼ˆé©¼å³°/è›‡å½¢æ··åˆï¼‰
            jorm.Range(18, 100),
        },
    }.Validate
}

user := &User{UserName: "Bob", UserAge: 10}
err := jorm.Validate(user, user.GetValidator())
// éªŒè¯ UserName: é€šè¿‡ Required å’Œ MinLen(3)
// éªŒè¯ user_name (åˆ—å): é€šè¿‡ MaxLen(50)
// éªŒè¯ User_Age: å¤±è´¥ï¼Œå¹´é¾„ 10 ä¸åœ¨ 18-100 èŒƒå›´å†…
```

## å¤æ‚éªŒè¯åœºæ™¯

### æ¡ä»¶éªŒè¯

```go
type User struct {
    ID     int64  `jorm:"pk auto"`
    Type   string `jorm:"size:20"`
    Email  string `jorm:"size:100"`
    Phone  string `jorm:"size:20"`
}

func (u *User) GetValidator() jorm.Validator {
    return jorm.Rules{
        "Type": {
            jorm.Required,
            jorm.In("personal", "business").Msg("ç±»å‹æ— æ•ˆ"),
        },
        "Email": {
            // ä¸ªäººç”¨æˆ·å¿…å¡«é‚®ç®±
            jorm.Required.If(u.Type == "personal").Msg("ä¸ªäººç”¨æˆ·å¿…é¡»å¡«å†™é‚®ç®±"),
            jorm.Email,
        },
        "Phone": {
            // ä¼ä¸šç”¨æˆ·å¿…å¡«ç”µè¯
            jorm.Required.If(u.Type == "business").Msg("ä¼ä¸šç”¨æˆ·å¿…é¡»å¡«å†™ç”µè¯"),
            jorm.Mobile,
        },
    }.Validate
}
```

### ç»„åˆéªŒè¯

```go
type Order struct {
    ID       int64     `jorm:"pk auto"`
    UserID   int64     `jorm:"fk:User.ID"`
    Amount   float64
    Quantity int
    Date     time.Time `jorm:"auto_time"`
}

func (o *Order) GetValidator() jorm.Validator {
    return jorm.Rules{
        "Amount": {
            jorm.Required,
            jorm.Min(0.01).Msg("é‡‘é¢å¿…é¡»å¤§äº0"),
        },
        "Quantity": {
            jorm.Required,
            jorm.Min(1).Msg("æ•°é‡è‡³å°‘ä¸º1"),
            jorm.Max(1000).Msg("æ•°é‡ä¸èƒ½è¶…è¿‡1000"),
        },
    }.Validate
}

func (o *Order) GetBusinessValidator() jorm.Validator {
    return func(v any) error {
        // åŸºç¡€éªŒè¯
        if err := o.GetValidator()(v); err != nil {
            return err
        }

        order := v.(*Order)

        // ä¸šåŠ¡éªŒè¯ï¼šè®¢å•æ€»é‡‘é¢ä¸èƒ½è¶…è¿‡ç”¨æˆ·ä½™é¢
        var user User
        if err := db.Model(&User{}).Where("id = ?", order.UserID).First(&user); err != nil {
            return fmt.Errorf("ç”¨æˆ·ä¸å­˜åœ¨")
        }

        if order.Amount > user.Balance {
            return fmt.Errorf("ä½™é¢ä¸è¶³")
        }

        return nil
    }
}
```

## ä¸‰ç§éªŒè¯æ–¹å¼å¯¹æ¯”

### 1. jorm.Validate - ç‹¬ç«‹éªŒè¯ï¼ˆæ¨èç”¨äºè¡¨å•/APIï¼‰

```go
// éªŒè¯æ•´ä¸ªç»“æ„ä½“ï¼Œä¸æ¶‰åŠæ•°æ®åº“
err := jorm.Validate(user, user.GetValidator())
```

**ç‰¹ç‚¹**ï¼š
- âœ… éªŒè¯æ•´ä¸ªç»“æ„ä½“
- âœ… ä¸éœ€è¦æ•°æ®åº“è¿æ¥
- âœ… è¿”å›è¯¦ç»†çš„å­—æ®µé”™è¯¯ä¿¡æ¯
- âœ… å¯ä»¥ç»„åˆå¤šä¸ªéªŒè¯å™¨
- âŒ ä¸ä¼šè§¦å‘é’©å­å‡½æ•°
- âŒ ä¸ä¼šä¿å­˜åˆ°æ•°æ®åº“

**é€‚ç”¨åœºæ™¯**ï¼š
- API è¯·æ±‚æ•°æ®éªŒè¯
- è¡¨å•æäº¤å‰éªŒè¯
- å•å…ƒæµ‹è¯•

---

### 2. InsertWithValidator / UpdateWithValidator - å¸¦æ•°æ®åº“æ“ä½œ

```go
// å¸¦éªŒè¯çš„æ’å…¥ï¼ˆæ¶‰åŠæ•°æ®åº“ï¼‰
id, err := db.Model(user).InsertWithValidator(user, user.GetValidator())

// å¸¦éªŒè¯çš„æ›´æ–°ï¼ˆæ¶‰åŠæ•°æ®åº“ï¼‰
affected, err := db.Model(&User{}).
    Where("id = ?", user.ID).
    UpdateWithValidator(user, user.GetValidator())
```

**ç‰¹ç‚¹**ï¼š
- âœ… éªŒè¯é€šè¿‡åè‡ªåŠ¨ä¿å­˜åˆ°æ•°æ®åº“
- âœ… ä¼šè§¦å‘é’©å­å‡½æ•°
- âœ… è¿”å›æ•°æ®åº“æ“ä½œç»“æœ
- âœ… æ”¯æŒäº‹åŠ¡
- âŒ éœ€è¦æ•°æ®åº“è¿æ¥
- âŒ éªŒè¯å¤±è´¥ä¸ä¼šæ‰§è¡Œæ•°æ®åº“æ“ä½œ

**é€‚ç”¨åœºæ™¯**ï¼š
- åˆ›å»ºæ–°è®°å½•
- æ›´æ–°ç°æœ‰è®°å½•

---

### 3. jorm.Check - ä¸´æ—¶éªŒè¯å•ä¸ªå­—æ®µï¼ˆæ¨èç”¨äºé’©å­å‡½æ•°ï¼‰

```go
// åœ¨é’©å­å‡½æ•°ä¸­ä¸´æ—¶éªŒè¯å•ä¸ªå­—æ®µ
func (u *User) BeforeInsert() error {
    if err := jorm.Check(u.Code,
        jorm.Required,
        jorm.MinLen(5),
    ); err != nil {
        return err
    }
    return nil
}
```

**ç‰¹ç‚¹**ï¼š
- âœ… åªéªŒè¯å•ä¸ªå­—æ®µ
- âœ… å¯ä»¥åœ¨ä»»æ„ä½ç½®ä½¿ç”¨
- âœ… çµæ´»æ€§é«˜ï¼Œæ— éœ€å®šä¹‰éªŒè¯å™¨
- âœ… æ”¯æŒè‡ªå®šä¹‰é”™è¯¯æ¶ˆæ¯
- âŒ åªèƒ½éªŒè¯ä¸€ä¸ªå­—æ®µ
- âŒ ä¸è¿”å›è¯¦ç»†çš„å­—æ®µé”™è¯¯ä¿¡æ¯

**é€‚ç”¨åœºæ™¯**ï¼š
- é’©å­å‡½æ•°ä¸­çš„ä¸´æ—¶éªŒè¯
- æ¡ä»¶éªŒè¯
- ä¸šåŠ¡è§„åˆ™éªŒè¯

---

### é€‰æ‹©æŒ‡å—

| åœºæ™¯ | æ¨èæ–¹å¼ | åŸå›  |
|-----|---------|------|
| API è¯·æ±‚æ•°æ®éªŒè¯ | `jorm.Validate` | ä¸éœ€è¦æ•°æ®åº“ï¼Œè¿”å›è¯¦ç»†é”™è¯¯ |
| è¡¨å•æäº¤å‰éªŒè¯ | `jorm.Validate` | å¿«é€ŸéªŒè¯ï¼Œæ— éœ€æ•°æ®åº“è¿æ¥ |
| åˆ›å»ºæ–°è®°å½• | `InsertWithValidator` | éªŒè¯åè‡ªåŠ¨ä¿å­˜ï¼Œè§¦å‘é’©å­ |
| æ›´æ–°è®°å½• | `UpdateWithValidator` | éªŒè¯åè‡ªåŠ¨æ›´æ–°ï¼Œè§¦å‘é’©å­ |
| é’©å­å‡½æ•°ä¸­éªŒè¯å­—æ®µ | `jorm.Check` | ç®€å•çµæ´»ï¼Œæ— éœ€å®šä¹‰éªŒè¯å™¨ |
| æ¡ä»¶éªŒè¯ | `jorm.Check` | å¯åœ¨ä»£ç ä¸­åŠ¨æ€æ·»åŠ éªŒè¯ |
| å•å…ƒæµ‹è¯• | `jorm.Validate` | ç‹¬ç«‹éªŒè¯ï¼Œä¸ä¾èµ–æ•°æ®åº“ |

### å¿«é€Ÿå¯¹æ¯”è¡¨

| ç‰¹æ€§ | jorm.Validate | Insert/UpdateWithValidator | jorm.Check |
|-----|--------------|---------------------------|-----------|
| éªŒè¯å¯¹è±¡ | æ•´ä¸ªç»“æ„ä½“ | æ•´ä¸ªç»“æ„ä½“ | å•ä¸ªå­—æ®µ |
| éœ€è¦å®šä¹‰éªŒè¯å™¨ | âœ… | âœ… | âŒ |
| éœ€è¦æ•°æ®åº“è¿æ¥ | âŒ | âœ… | âŒ |
| è§¦å‘é’©å­å‡½æ•° | âŒ | âœ… | âŒï¼ˆåœ¨é’©å­å†…ä½¿ç”¨ï¼‰ |
| ä¿å­˜åˆ°æ•°æ®åº“ | âŒ | âœ… | âŒ |
| è¿”å›è¯¦ç»†é”™è¯¯ | âœ… | âœ… | âŒ |
| çµæ´»æ€§ | ä¸­ | ä¸­ | é«˜ |
| é€‚ç”¨ä½ç½® | ä»»æ„ | æ•°æ®åº“æ“ä½œ | ä»»æ„ï¼Œç‰¹åˆ«æ˜¯é’©å­å‡½æ•° |

## æœ€ä½³å®è·µ

```go
// ç‹¬ç«‹éªŒè¯ï¼Œä¸æ¶‰åŠæ•°æ®åº“
err := jorm.Validate(user, user.GetValidator())
```

**ç‰¹ç‚¹**ï¼š
- âœ… ä¸éœ€è¦æ•°æ®åº“è¿æ¥
- âœ… å¿«é€ŸéªŒè¯æ•°æ®æ ¼å¼
- âœ… é€‚åˆè¡¨å•éªŒè¯ã€API è¯·æ±‚éªŒè¯
- âœ… å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹ä½¿ç”¨
- âŒ ä¸ä¼šè§¦å‘é’©å­å‡½æ•°
- âŒ ä¸ä¼šä¿å­˜åˆ°æ•°æ®åº“

**é€‚ç”¨åœºæ™¯**ï¼š
- API è¯·æ±‚æ•°æ®éªŒè¯
- è¡¨å•æäº¤å‰éªŒè¯
- å•å…ƒæµ‹è¯•
- ä¸æ¶‰åŠæ•°æ®åº“çš„æ•°æ®æ£€æŸ¥

### InsertWithValidator / UpdateWithValidator - å¸¦æ•°æ®åº“æ“ä½œ

```go
// å¸¦éªŒè¯çš„æ’å…¥ï¼ˆæ¶‰åŠæ•°æ®åº“ï¼‰
id, err := db.Model(user).InsertWithValidator(user, user.GetValidator())

// å¸¦éªŒè¯çš„æ›´æ–°ï¼ˆæ¶‰åŠæ•°æ®åº“ï¼‰
affected, err := db.Model(&User{}).
    Where("id = ?", user.ID).
    UpdateWithValidator(user, user.GetValidator())
```

**ç‰¹ç‚¹**ï¼š
- âœ… éªŒè¯é€šè¿‡åè‡ªåŠ¨ä¿å­˜åˆ°æ•°æ®åº“
- âœ… ä¼šè§¦å‘é’©å­å‡½æ•°ï¼ˆå¦‚ BeforeInsertï¼‰
- âœ… è¿”å›æ•°æ®åº“æ“ä½œç»“æœ
- âœ… æ”¯æŒäº‹åŠ¡
- âŒ éœ€è¦æ•°æ®åº“è¿æ¥
- âŒ éªŒè¯å¤±è´¥ä¸ä¼šæ‰§è¡Œæ•°æ®åº“æ“ä½œ

**é€‚ç”¨åœºæ™¯**ï¼š
- åˆ›å»ºæ–°è®°å½•
- æ›´æ–°ç°æœ‰è®°å½•
- éœ€è¦æ‰§è¡Œæ•°æ®åº“æ“ä½œçš„åœºæ™¯

### é€‰æ‹©å»ºè®®

| åœºæ™¯ | æ¨èæ–¹å¼ |
|-----|---------|
| API è¯·æ±‚æ•°æ®éªŒè¯ | `jorm.Validate` |
| è¡¨å•æäº¤å‰éªŒè¯ | `jorm.Validate` |
| åˆ›å»ºæ–°è®°å½• | `InsertWithValidator` |
| æ›´æ–°è®°å½• | `UpdateWithValidator` |
| å•å…ƒæµ‹è¯• | `jorm.Validate` |
| ä¸æ¶‰åŠæ•°æ®åº“çš„éªŒè¯ | `jorm.Validate` |

## æœ€ä½³å®è·µ

### 1. ä¸ºæ¯ä¸ªæ¨¡å‹å®šä¹‰éªŒè¯å™¨

```go
// æ¨è
type User struct {
    ID   int64  `jorm:"pk auto"`
    Name string
}
func (u *User) GetValidator() jorm.Validator { ... }

// ä¸æ¨èï¼šä¸å®šä¹‰éªŒè¯å™¨
type User struct {
    ID   int64  `jorm:"pk auto"`
    Name string
}
```

### 2. æä¾›å‹å¥½çš„é”™è¯¯æ¶ˆæ¯

```go
// æ¨è
jorm.Required.Msg("ç”¨æˆ·åä¸èƒ½ä¸ºç©º")
jorm.MinLen(2).Msg("ç”¨æˆ·åè‡³å°‘2ä¸ªå­—ç¬¦")

// ä¸æ¨è
jorm.Required
jorm.MinLen(2)
```

### 3. åœ¨æ’å…¥å’Œæ›´æ–°æ—¶éƒ½éªŒè¯

```go
// æ¨è
id, _ := db.Model(user).InsertWithValidator(user, user.GetValidator())
affected, _ := db.Model(&User{}).
    Where("id = ?", user.ID).
    UpdateWithValidator(user, user.GetValidator())

// ä¸æ¨èï¼šåªåœ¨æ’å…¥æ—¶éªŒè¯
id, _ := db.Model(user).InsertWithValidator(user, user.GetValidator())
affected, _ := db.Model(&User{}).Where("id = ?", user.ID).Update(user)
```

### 4. ä¸é’©å­å‡½æ•°é…åˆä½¿ç”¨

éªŒè¯å™¨å’Œé’©å­å‡½æ•°å¯ä»¥é…åˆä½¿ç”¨ï¼š

- **éªŒè¯å™¨**ï¼šåœ¨æ’å…¥/æ›´æ–°å‰éªŒè¯æ•°æ®æ ¼å¼å’Œä¸šåŠ¡è§„åˆ™
- **é’©å­å‡½æ•°**ï¼šåœ¨éªŒè¯é€šè¿‡åï¼Œå¯¹æ•°æ®è¿›è¡Œå¤„ç†ï¼ˆå¦‚åŠ å¯†ã€è®¡ç®—ç­‰ï¼‰

**ç¤ºä¾‹ï¼šå¯†ç éªŒè¯å’ŒåŠ å¯†**

```go
type User struct {
    ID       int64  `jorm:"pk auto"`
    Username string
    Password string `jorm:"size:255"`
}

// éªŒè¯å™¨ï¼šæ£€æŸ¥å¯†ç æ ¼å¼
func (u *User) GetValidator() jorm.Validator {
    return jorm.Rules{
        "Password": {
            jorm.Required.Msg("å¯†ç å¿…å¡«"),
            jorm.MinLen(6).Msg("å¯†ç è‡³å°‘6ä¸ªå­—ç¬¦"),
        },
    }.Validate
}

// é’©å­å‡½æ•°ï¼šåŠ å¯†å¯†ç ï¼ˆè¯¦è§ [é’©å­å‡½æ•°](./09-é’©å­å‡½æ•°.md)ï¼‰
func (u *User) BeforeInsert() error {
    u.Password = hashPassword(u.Password)
    return nil
}

// ä½¿ç”¨ï¼šéªŒè¯é€šè¿‡åè‡ªåŠ¨åŠ å¯†
id, err := db.Model(user).InsertWithValidator(user, user.GetValidator())
```

**æ‰§è¡Œé¡ºåº**ï¼š
1. å…ˆæ‰§è¡ŒéªŒè¯å™¨ â†’ éªŒè¯å¤±è´¥åˆ™ä¸­æ­¢
2. éªŒè¯é€šè¿‡åæ‰§è¡Œé’©å­å‡½æ•°
3. æœ€åæ‰§è¡Œæ’å…¥/æ›´æ–°æ“ä½œ

> ğŸ’¡ è¯¦ç»†äº†è§£é’©å­å‡½æ•°ï¼Œè¯·é˜…è¯» [é’©å­å‡½æ•°](./09-é’©å­å‡½æ•°.md) ç« èŠ‚

## ä¸‹ä¸€æ­¥

- [é’©å­å‡½æ•°](./09-é’©å­å‡½æ•°.md) - å­¦ä¹ é’©å­å‡½æ•°
- [é”™è¯¯å¤„ç†](./16-é”™è¯¯å¤„ç†.md) - å­¦ä¹ é”™è¯¯å¤„ç†
- [æœ€ä½³å®è·µ](./18-æœ€ä½³å®è·µ.md) - äº†è§£æ›´å¤šæœ€ä½³å®è·µ
